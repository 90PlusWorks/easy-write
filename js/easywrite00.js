var wrapper=document.getElementById("signature-pad"),clearButton=wrapper.querySelector("[data-action=clear]"),COPYMEButton=wrapper.querySelector("[data-action=keep]"),canvas=wrapper.querySelector("canvas"),wrapper2=document.getElementById("display-pad"),canvas2=wrapper2.querySelector("canvas"),cheight=parseInt(canvas2.getAttribute("height")),cwidth=parseInt(canvas2.getAttribute("width"));ctx2.fillStyle="white",ctx2.fillRect(0,0,cwidth,cheight);var screenWidth=window.screen.availWidth,screenHeight=window.screen.availHeight;console.log(screenWidth,screenHeight);var t=0,signaturePad=new SignaturePad(canvas,{backgroundColor:"rgba(0,0,0,t)"}),displayPad=signaturePad,xpos=0,ypos=0;function savePDF(){let a=new Date;var t=a.getDate()+"/"+(a.getMonth()+1)+"/"+a.getFullYear()+"--"+a.getHours()+":"+a.getMinutes()+":"+a.getSeconds()+".pdf",e=(canvas2.getContext("2d"),canvas2.toDataURL("image/jpeg",1)),n=new jsPDF({unit:"px",format:[2*cheight,.6*cwidth]});n.addImage(e,"JPEG",0,0),n.save(t)}function colorR(){signaturePad.penColor="rgb(255,0,0)"}function colorO(){signaturePad.penColor="rgb(255,173,0)"}function colorY(){signaturePad.penColor="rgb(255,255,0)"}function colorG(){signaturePad.penColor="rgb(20,255,0)"}function colorBl(){signaturePad.penColor="rgb(0,120,255)"}function colorP(){signaturePad.penColor="rgb(165,0,255)"}function colorB(){signaturePad.penColor="rgb(0,0,0)"}function lines(){signaturePad.clear();ctx.lineWidth=2,ctx.strokeStyle="blue",ctx.fillStyle="rgba(0,0,0,t)",ctx.clearRect(0,0,canvas.width,canvas.height),ctx.beginPath(),ctx.moveTo(canvas.width-5,.6*canvas.height),ctx.lineTo(5,.6*canvas.height),ctx.stroke(),ctx.beginPath(),ctx.moveTo(canvas.width-5,.6*canvas.height+3),ctx.lineTo(5,.6*canvas.height+3),ctx.beginPath(),ctx.moveTo(canvas.width-5,.6*canvas.height+canvas.height/4),ctx.lineTo(5,.6*canvas.height+canvas.height/4),ctx.stroke(),ctx.beginPath(),ctx.moveTo(canvas.width-5,.6*canvas.height-canvas.height/4),ctx.lineTo(5,.6*canvas.height-canvas.height/4),ctx.stroke(),ctx.beginPath(),ctx.moveTo(canvas.width-5,.6*canvas.height+canvas.height/4+3),ctx.lineTo(5,.6*canvas.height+canvas.height/4+3),ctx.stroke(),ctx.beginPath(),ctx.moveTo(canvas.width-5,.6*canvas.height-canvas.height/4+3),ctx.lineTo(5,.6*canvas.height-canvas.height/4+3),ctx.stroke()}function centre(){0!=xpos&&(ypos+=1),xpos=1.5,ctx2.drawImage(canvas,0,canvas.height/2.5-canvas.height/2.8,canvas.width-5,canvas.height/2.5+canvas.height/1.45,xpos*canvas.width/4,ypos*canvas.height/6,canvas.width/4,canvas.height/4),wrapper2.scrollTo(0,ypos*canvas.height/6-canvas.height/12),ypos+=1,xpos=0,lines()}function mynewline(){ypos+=1,xpos=0,wrapper2.scrollTo(0,ypos*canvas.height/6-canvas.height/12)}function resizeCanvas(){var a=Math.max(window.devicePixelRatio||1,1);canvas.width=canvas.offsetWidth*a,canvas.height=canvas.offsetHeight*a,canvas.getContext("2d").scale(a,a),lines()}function download(a,t){var e=dataURLToBlob(a),a=window.URL.createObjectURL(e),e=document.createElement("a");e.style="display: none",e.href=a,e.download=t,document.body.appendChild(e),e.click(),window.URL.revokeObjectURL(a)}function dataURLToBlob(a){for(var t=a.split(";base64,"),a=t[0].split(":")[1],e=window.atob(t[1]),n=e.length,c=new Uint8Array(n),i=0;i<n;++i)c[i]=e.charCodeAt(i);return new Blob([c],{type:a})}ctx.lineWidth=3,ctx.strokeStyle="blue",(window.onresize=resizeCanvas)(),clearButton.addEventListener("click",function(a){lines()}),COPYMEButton.addEventListener("click",function(a){4==xpos&&(xpos=0,ypos+=1),ctx2.drawImage(canvas,0,0,canvas.naturalWidth,canvas.naturalHeight,xpos*ctx2.naturalWidth/4,ypos*ctx2.naturalHeight/6,canvas.naturalWidth/4,canvas.naturalHeight/4),wrapper2.scrollTo(0,ypos*canvas.naturalHeight/6),xpos+=1,lines()});
